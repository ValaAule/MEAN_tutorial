angular.module("app",["ngRoute"]),console.log("module.js: access to module successful"),angular.module("app").controller("ApplicationCtrl",["$scope",function(o){o.$on("login",function(s,e){o.currentUser=e,console.log("application.ctrl.js = login successful")})}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(o,s){o.login=function(e,t){s.login(e,t).then(function(s){o.$emit("login",s),console.log("login.ctrl.js: login successful")})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(o,s){o.addPost=function(){o.postBody&&s.create({username:"Add Post Button",body:o.postBody}).success(function(){o.postBody=null,console.log("posts.ctrl.js: create post successful")})},o.$on("ws:new_post",function(s,e){o.$apply(function(){o.posts.unshift(e),console.log("posts.ctrl.js: websocket new post successful")})}),s.fetch().success(function(s){o.posts=s,console.log("posts.ctrl.js: fetch post successful")})}]),angular.module("app").service("PostsSvc",["$http",function(o){this.fetch=function(){return console.log("posts.svc.js: fetch post successful"),o.get("/api/posts")},this.create=function(s){return console.log("posts.svc.js: create post successful"),o.post("/api/posts",s)}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(o,s){o.register=function(e,t){s.register(e,t).then(function(s){o.$emit("login",s),console.log("register.ctrl.js: registration succesful")})}}]),angular.module("app").config(["$routeProvider",function(o){o.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"}),console.log("routes.js: routing succesful")}]),angular.module("app").service("UserSvc",["$http",function(o){var s=this;s.getUser=function(){return o.get("/api/users").then(function(o){return console.log("user.svc.js: get user successful"),o.data})},s.login=function(e,t){return o.post("/api/sessions",{username:e,password:t}).then(function(e){return s.token=e.data,o.defaults.headers.common["X-Auth"]=e.data,console.log("user.svc.js: login successful"),s.getUser()})},s.register=function(e,t){return console.log("user.svc.js: user registration successful"),o.post("/api/users",{username:e,password:t}).then(function(){return s.login(e,t)})}}]),angular.module("app").run(["$rootScope","$timeout",function(o,s){!function e(){var t="ws://localhost:3000",n=new WebSocket(t);n.onopen=function(){console.log("ng/websockets.js: websocket connected")},n.onclose=function(){console.log("Websocket closed. Reconnecting..."),s(e,1e4)},n.onmessage=function(s){console.log(s);var e=JSON.parse(s.data);o.$broadcast("ws:"+e.topic,e.data)}}()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJsb2dpbi5jdHJsLmpzIiwicG9zdHMuY3RybC5qcyIsInBvc3RzLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyb3V0ZXMuanMiLCJ1c2VyLnN2Yy5qcyIsIndlYnNvY2tldHMuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnNvbGUiLCJsb2ciLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiJG9uIiwiXyIsInVzZXIiLCJjdXJyZW50VXNlciIsIlVzZXJTdmMiLCJsb2dpbiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ0aGVuIiwiJGVtaXQiLCJQb3N0c1N2YyIsImFkZFBvc3QiLCJwb3N0Qm9keSIsImNyZWF0ZSIsImJvZHkiLCJzdWNjZXNzIiwicG9zdCIsIiRhcHBseSIsInBvc3RzIiwidW5zaGlmdCIsImZldGNoIiwic2VydmljZSIsIiRodHRwIiwidGhpcyIsImdldCIsInJlZ2lzdGVyIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJzdmMiLCJnZXRVc2VyIiwicmVzcG9uc2UiLCJkYXRhIiwidG9rZW4iLCJkZWZhdWx0cyIsImhlYWRlcnMiLCJjb21tb24iLCJydW4iLCIkcm9vdFNjb3BlIiwiJHRpbWVvdXQiLCJjb25uZWN0IiwidXJsIiwiY29ubmVjdGlvbiIsIldlYlNvY2tldCIsIm9ub3BlbiIsIm9uY2xvc2UiLCJvbm1lc3NhZ2UiLCJlIiwicGF5bG9hZCIsIkpTT04iLCJwYXJzZSIsIiRicm9hZGNhc3QiLCJ0b3BpYyJdLCJtYXBwaW5ncyI6IkFBR0FBLFFBQVFDLE9BQU8sT0FDWCxZQUdKQyxRQUFRQyxJQUFJLDBDQ0haSCxRQUFRQyxPQUFPLE9BQ2RHLFdBQVcsbUJBQUEsU0FBbUIsU0FBU0MsR0FDaENBLEVBQU9DLElBQUksUUFBUyxTQUFTQyxFQUFHQyxHQUM1QkgsRUFBT0ksWUFBY0QsRUFDckJOLFFBQVFDLElB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QUltRCxFQUNaLElBQUlDLEdBQVVDLEtBQUtDLE1BQU1ILEVBQUVmLEtBQzNCTSxHQUFXYSxXQUFXLE1BQVFILEVBQVFJLE1BQU9KLEVBQVFoQiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgQXVsZSBvbiAyLzcvMTUuXG4gKi9cbmFuZ3VsYXIubW9kdWxlKCdhcHAnLFtcbiAgICAnbmdSb3V0ZSdcbl0pXG5cbmNvbnNvbGUubG9nKCdtb2R1bGUuanM6IGFjY2VzcyB0byBtb2R1bGUgc3VjY2Vzc2Z1bCcpIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEF1bGUgb24gMi8xMi8xNS5cbiAqIFVzZWQgZm9yIGxvZ2luIHBhZ2VcbiAqL1xuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS4kb24oJ2xvZ2luJywgZnVuY3Rpb24oXywgdXNlcikge1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRVc2VyID0gdXNlclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FwcGxpY2F0aW9uLmN0cmwuanMgPSBsb2dpbiBzdWNjZXNzZnVsJyApXG4gICAgICAgIH0pXG4gICAgfSkiLCIvKipcbiAqIENyZWF0ZWQgYnkgQXVsZSBvbiAyLzkvMTUuXG4gKiBVc2VkIGZvciBsb2dpbiBwYWdlXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgVXNlclN2Yykge1xuICAgICAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVzZXIpe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgdXNlcilcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xvZ2luLmN0cmwuanM6IGxvZ2luIHN1Y2Nlc3NmdWwnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEF1bGUgb24gMi82LzE1LlxuICogY3JlYXRlIHRoZSBQb3N0c0N0cmwgbW9kdWxlIGFuZCBkZXBlbmRlbmN5IGluamVjdCAkc2NvcGUsIHRoZSBzY29wZSB0aWVzL2dsdWVzIHRoZSBjb250cm9sbGVyIHRvIHRoZSB2aWV3XG4gKiBpbnRlZ3JhdGUgdG8gdGhlIFJFU1QgQVBJIHRvIHBvc3QgYmFjayB0byBNb25nb0RCLiAgT25seSB0aGUgc3VjY2VzcyBmdW5jdGlvbiBpcyBwb3N0ZWQgYW5kIGl0IG51bGxzIHRoZSB2YWx1ZSBmb3IgdGhlIG5leHQgdGltZVxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLmNvbnRyb2xsZXIoXCJQb3N0c0N0cmxcIixmdW5jdGlvbiAoJHNjb3BlLCBQb3N0c1N2Yykge1xuICAgICRzY29wZS5hZGRQb3N0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkc2NvcGUucG9zdEJvZHkpIHtcbiAgICAgICAgICAgIFBvc3RzU3ZjLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgdXNlcm5hbWU6ICdBZGQgUG9zdCBCdXR0b24nLFxuICAgICAgICAgICAgICAgIGJvZHk6ICRzY29wZS5wb3N0Qm9keVxuICAgICAgICAgICAgLy9pZiBzZXJ2ZXIgcmVzcG9uc2VzIHN1Y2Nlc3MsIHVuc2hpZnQgKGFkZCkgdGhlIHBvc3Qgb250byAkc2NvcGUucG9zdHMgYW5kIHRoZW4gc2V0IGl0IHRvIG51bGxcbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgICAgICAvLyAgICRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpIC0gcmVtb3ZlZCB0byBwcmV2ZW50IGFhZGRlZCBpdCB0d2ljZVxuICAgICAgICAgICAgICAgICRzY29wZS5wb3N0Qm9keSA9IG51bGxcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncG9zdHMuY3RybC5qczogY3JlYXRlIHBvc3Qgc3VjY2Vzc2Z1bCcpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfVxuXG4vLyBJIGRvbid0IHNlZW0gdG8gYmUgYWJsZSB0byBjYWxsIHRoaXMgY29kZSBzdWNjZXNzZnVsbHlcbiRzY29wZS4kb24oJ3dzOm5ld19wb3N0JywgZnVuY3Rpb24gKF8sIHBvc3QpIHtcbiAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnBvc3RzLnVuc2hpZnQocG9zdClcbiAgICAgICAgY29uc29sZS5sb2coJ3Bvc3RzLmN0cmwuanM6IHdlYnNvY2tldCBuZXcgcG9zdCBzdWNjZXNzZnVsJylcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgUG9zdHNTdmMuZmV0Y2goKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocG9zdHMpIHtcbiAgICAgICAgICAgICRzY29wZS5wb3N0cyA9IHBvc3RzXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncG9zdHMuY3RybC5qczogZmV0Y2ggcG9zdCBzdWNjZXNzZnVsJylcbiAgICAgICAgfSlcbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5zZXJ2aWNlKCdQb3N0c1N2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuICAgIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwb3N0cy5zdmMuanM6IGZldGNoIHBvc3Qgc3VjY2Vzc2Z1bCcpXG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcG9zdHMnKVxuICAgIH1cbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uIChwb3N0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwb3N0cy5zdmMuanM6IGNyZWF0ZSBwb3N0IHN1Y2Nlc3NmdWwnKVxuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wb3N0cycsIHBvc3QpXG4gICAgfVxufSkiLCIvKipcbiAqIENyZWF0ZWQgYnkgQXVsZSBvbiAyLzkvMTUuXG4gKiBVc2VkIGZvciByZWdpc3RlciBwYWdlXG4gKi9cblxuYW5ndWxhci5tb2R1bGUoJ2FwcCcpXG4uY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgZnVuY3Rpb24gKCRzY29wZSwgVXNlclN2Yykge1xuICAgICAgICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICBVc2VyU3ZjLnJlZ2lzdGVyKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHVzZXIpe1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGVtaXQoJ2xvZ2luJywgdXNlcilcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlZ2lzdGVyLmN0cmwuanM6IHJlZ2lzdHJhdGlvbiBzdWNjZXNmdWwnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0pIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEF1bGUgb24gMi85LzE1LlxuICogUm91dGluZyBmaWxlIHRoYXQgbWFwcyB0aGUgY29udHJvbGxlcnMgYW5kIGh0bWwgZmlsZXNcbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnYXBwJylcbi5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbignLycsIHtjb250cm9sbGVyOiAnUG9zdHNDdHJsJywgdGVtcGxhdGVVcmw6ICdwb3N0cy5odG1sJ30pXG4gICAgICAgICAgICAud2hlbignL3JlZ2lzdGVyJywge2NvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnLCB0ZW1wbGF0ZVVybDogJ3JlZ2lzdGVyLmh0bWwnfSlcbiAgICAgICAgICAgIC53aGVuKCcvbG9naW4nLCB7Y29udHJvbGxlcjogJ0xvZ2luQ3RybCcsIHRlbXBsYXRlVXJsOiAnbG9naW4uaHRtbCd9KVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JvdXRlcy5qczogcm91dGluZyBzdWNjZXNmdWwnKVxuICAgIH0pIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEF1bGUgb24gMi85LzE1LlxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuLnNlcnZpY2UoJ1VzZXJTdmMnLCBmdW5jdGlvbigkaHR0cCl7XG4gICAgdmFyIHN2YyA9IHRoaXNcbiAgICBzdmMuZ2V0VXNlciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMnKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2VyLnN2Yy5qczogZ2V0IHVzZXIgc3VjY2Vzc2Z1bCcpXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN2Yy5sb2dpbj1mdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2Vzc2lvbnMnLCB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgc3ZjLnRva2VuID0gcmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddID0gcmVzcG9uc2UuZGF0YVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZXIuc3ZjLmpzOiBsb2dpbiBzdWNjZXNzZnVsJylcbiAgICAgICAgICAgIHJldHVybiBzdmMuZ2V0VXNlcigpXG4gICAgICAgIH0pXG4gICAgfVxuXG4gLy91c2VkIHRvIHJlZ2lzdGVyIG5ldyB1c2VycyBhbmQgYXV0b21hdGljYWxseSBsb2dzIHRoZW0gaW5cbiAgICBzdmMucmVnaXN0ZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1c2VyLnN2Yy5qczogdXNlciByZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCcpXG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gc3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAgICAgfSlcbiAgICB9XG59KSIsIi8qKlxuICogQ3JlYXRlZCBieSBBdWxlIG9uIDIvMTkvMTUuXG4gKiBBbmd1bGFyIHJ1biBjb21wb25lbnQgZXhlY3V0ZWQgZHVyaW5nIHRoZSBpbml0aWFsaXphdGlvbiBwaGFzZVxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdhcHAnKVxuICAgIC5ydW4oZnVuY3Rpb24gKCRyb290U2NvcGUsICR0aW1lb3V0KSB7XG4gICAgICAgIChmdW5jdGlvbiBjb25uZWN0KCkge1xuICAgICAgICAgICAgdmFyIHVybCA9ICd3czovL2xvY2FsaG9zdDozMDAwJ1xuICAgICAgICAgICAgdmFyIGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KHVybClcblxuICAgICAgICAgICAgY29ubmVjdGlvbi5vbm9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbmcvd2Vic29ja2V0cy5qczogd2Vic29ja2V0IGNvbm5lY3RlZCcpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vcmVjb25uZWN0IGxvZ2ljXG4gICAgICAgICAgICBjb25uZWN0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXZWJzb2NrZXQgY2xvc2VkLiBSZWNvbm5lY3RpbmcuLi4nKVxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGNvbm5lY3QsIDEwKjEwMDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25uZWN0aW9uLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKVxuICAgICAgICAgICAgICAgIHZhciBwYXlsb2FkID0gSlNPTi5wYXJzZShlLmRhdGEpXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCd3czonICsgcGF5bG9hZC50b3BpYywgcGF5bG9hZC5kYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSAoKVxuICAgIH0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9